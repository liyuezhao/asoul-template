\ProvidesPackage{asoul}
\RequirePackage{geometry}
\RequirePackage{mdframed}
\RequirePackage{kvoptions}
\RequirePackage{etoolbox}
\RequirePackage{xcolor}

\SetupKeyvalOptions{family = @AS,prefix = @AS@}
\DeclareBoolOption[true]{theoremsnumbered}
\DeclareBoolOption[false]{mobileview}
\ProcessKeyvalOptions*
\relax

\DeclareTextFontCommand{\emph}{\bfseries}

\settoggle{mytheorems}{true}
\newcounter{theorem}[section]
\setcounter{theorem}{0}
\renewcommand{\thetheorem}{\arabic{section}.\arabic{theorem}}

\if@AS@mobileview
\geometry{top=0.3cm, bottom=0.3cm, left=0.5cm, right=0.5cm}
\KOMAoptions{fontsize=16pt}
\fi

\newcommand{\diana}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/diana.jpg}%
\endgroup
}

\newcommand{\dianahappyframed}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/diana-happy-framed.jpg}%
\endgroup
}

\newcommand{\dianabulb}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/diana-bulb.jpg}%
\endgroup
}

\newcommand{\ava}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/ava.jpg}%
\endgroup
}

\newcommand{\bella}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/bella.jpg}%
\endgroup
}

\newcommand{\carol}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/carol.jpg}%
\endgroup
}


\newcommand{\eileen}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/eileen.jpg}%
\endgroup
}

\newcommand{\sweatingava}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/sweating-ava.jpg}%
\endgroup
}

\newcommand{\alpaca}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/acao.jpg}%
\endgroup
}

\newcommand{\giveheart}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/giveheart.png}%
\endgroup
}

\newcommand{\dianacandy}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/diana-candy.jpg}%
\endgroup
}

\newcommand{\nanami}{%
\begingroup\normalfont
\includegraphics[height=\fontcharht\font`\A]{img/nana7mi.jpg}%
\endgroup
}






\definecolor{ava}{HTML}{9AC8E2}
\definecolor{bella}{HTML}{DB7D74}
\definecolor{carol}{HTML}{B8A6D9}
\definecolor{diana}{HTML}{E799B0}
\definecolor{eileen}{HTML}{576690}
\definecolor{nanami}{HTML}{418BDE}


\newenvironment{theorem}[1][]{%
\def\mythm{Theorem}
\def\mycolor{ava}
\def\myheader{{\huge\ava}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{definition}[1][]{%
\def\mythm{Definition}
\def\mycolor{eileen}
\def\myheader{{\huge\eileen}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{proposition}[1][]{%
\def\mythm{Proposition}
\def\mycolor{bella}
\def\myheader{{\huge\bella}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{lemma}[1][]{%
\def\mythm{Lemma}
\def\mycolor{carol}
\def\myheader{{\huge\carol}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{example}[1][]{%
\def\mythm{Example}
\def\mycolor{nanami}
\def\myheader{{\huge\nanami}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{exercise}[1][]{%
\def\mythm{Exercise}
\def\mycolor{nanami}
\def\myheader{{\huge\nanami}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{warning}[1][]{%
\def\mythm{Warning}
\def\mycolor{Red!50}
\def\myheader{{\huge\giveheart}}
\refstepcounter{theorem}%
%\if@AS@theoremsnumbered
%\ifstrempty{#1}%
%{\mdfsetup{%
%frametitle={%
%\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
%\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
%{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
%}%
%{\mdfsetup{%
%frametitle={%
%\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
%\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
%{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
%}%
%\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\newenvironment{corollary}[1][]{%
\def\mythm{Corollary}
\def\mycolor{blue!40}
\def\myheader{{\huge\sweatingava}}
\refstepcounter{theorem}%
\if@AS@theoremsnumbered
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~~};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~\thetheorem~(#1)~~};}}%
}%
\else
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\fi
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\end{mdframed}}

\renewenvironment{proof}[1][]{%
\def\mythm{Proof}
\def\mycolor{diana}
\def\myheader{{\huge\dianabulb}}
\def\qedsymbol{\dianahappyframed}
%\refstepcounter{theorem}%
\ifstrempty{#1}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm\,};}}
}%
{\mdfsetup{%
frametitle={%
\tikz[baseline=(current bounding box.east),outer sep=0pt, rounded corners]
\node[anchor=east,rectangle,draw=\mycolor,line width=1pt,fill=white]
{\strut{~\kern-.5ex\raisebox{-.48ex}{\myheader}\kern-.50ex}\,~\mythm~(#1)~~};}}%
}%
\mdfsetup{innertopmargin=0pt,innerleftmargin=10pt,innerrightmargin=10pt,roundcorner=5pt, innerbottommargin=5pt,
linecolor=\mycolor,%
linewidth=1pt,topline=true,%
frametitleaboveskip=\dimexpr-\ht\strutbox\relax
}
\begin{mdframed}[]\relax%
}{\qed\end{mdframed}}